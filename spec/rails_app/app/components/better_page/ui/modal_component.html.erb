<div id="<%= id %>"
     data-controller="modal"
     data-modal-confirm-close-value="<%= confirm_close %>">

  <%# Trigger slot - bottone per aprire il modal %>
  <% if trigger? %>
    <%= trigger %>
  <% end %>

  <%# Container del modal (nascosto di default) %>
  <div data-modal-target="container"
       class="hidden relative z-50"
       aria-modal="true"
       role="dialog">

    <%# Backdrop %>
    <div data-modal-target="backdrop"
         data-action="click->modal#backdropClick"
         class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ease-out opacity-0">
    </div>

    <%# Modal panel container %>
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div data-modal-target="panel"
             class="<%= panel_classes %> opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95">

          <%# Header %>
          <% if show_header? %>
            <div class="flex items-center justify-between px-4 py-3 border-b border-gray-200">
              <div class="flex items-center gap-4">
                <% if title? %>
                  <h3 class="text-lg font-semibold leading-6 text-gray-900"><%= title %></h3>
                <% end %>
                <% if header_actions? %>
                  <div class="flex items-center gap-2">
                    <%= actions %>
                  </div>
                <% end %>
              </div>
              <% if closable? %>
                <button type="button"
                        data-action="click->modal#requestClose"
                        class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <span class="sr-only">Close</span>
                  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              <% end %>
            </div>
          <% end %>

          <%# Content %>
          <div class="px-4 py-4">
            <%= content %>
          </div>

          <%# Footer %>
          <% if footer_actions? %>
            <div class="flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-200 bg-gray-50">
              <%= actions %>
            </div>
          <% end %>

        </div>
      </div>
    </div>
  </div>
</div>
