<div class="mb-6">
  <%= form_with url: form_action, method: :get, local: true, class: "space-y-4" do |form| %>
    <div class="flex flex-col sm:flex-row gap-4">
      <div class="flex-1">
        <label for="search" class="sr-only">Search</label>
        <div class="relative">
          <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
            <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
            </svg>
          </div>
          <%= form.text_field :search,
                              value: current_search,
                              placeholder: placeholder,
                              class: "block w-full rounded-md border-0 py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6" %>
        </div>
      </div>

      <% if has_filters? %>
        <% filters.each do |filter| %>
          <div class="sm:w-48">
            <label for="<%= filter[:key] %>" class="sr-only"><%= filter[:label] %></label>
            <% if filter[:type] == :select %>
              <%= form.select filter[:key],
                             options_for_select(filter[:options] || [], filter[:current_value]),
                             { include_blank: filter[:label] },
                             class: "block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6" %>
            <% else %>
              <%= form.text_field filter[:key],
                                 value: filter[:current_value],
                                 placeholder: filter[:label],
                                 class: "block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6" %>
            <% end %>
          </div>
        <% end %>
      <% end %>

      <div>
        <%= form.submit "Search",
                       class: "inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600" %>
      </div>
    </div>

    <% if has_active_filters? %>
      <div class="flex items-center">
        <span class="text-sm text-gray-500 mr-2">Active filters:</span>
        <%= link_to "Clear all", form_action, class: "text-sm text-blue-600 hover:text-blue-500" %>
      </div>
    <% end %>

    <% if results_count %>
      <p class="text-sm text-gray-500">
        Found <%= results_count %> result<%= results_count == 1 ? '' : 's' %>
      </p>
    <% end %>
  <% end %>
</div>
